var caBrowserSupportAPIUrl="https://api25.commonapp.org/common/resource/incompatiblebrowser",caBrowserSupporAPIKey="tYFvpgKw3GaxrwoztllAc2j5bekLdMF25aayCxwx",defaultURL="https://api20.alpha.devca.net/common/resource/incompatiblebrowser",defaultAPIKey="YOxw0L2zAB8AFTMadZRkG1TTNSAkswhY7ZMNaLFP",BrowserDetect={init:function(){this.browser=this.searchString(this.dataBrowser)||"An unknown browser",this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"an unknown version",this.OS=this.searchString(this.dataOS)||"an unknown OS"},searchString:function(e){for(var r=0;r<e.length;r++){var t=e[r].string,i=e[r].prop;if(this.versionSearchString=e[r].versionSearch||e[r].identity,t){if(-1!=t.indexOf(e[r].subString))return e[r].identity}else if(i)return e[r].identity}},searchVersion:function(e){var r=e.indexOf(this.versionSearchString);if(-1!=r)return parseFloat(e.substring(r+this.versionSearchString.length+1))},dataBrowser:[{string:navigator.userAgent,subString:"OPR",identity:"Opera",versionSearch:"OPR"},{string:navigator.userAgent,subString:"Vivaldi",identity:"Vivaldi"},{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera",versionSearch:"Version"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"IE",versionSearch:"MSIE"},{string:navigator.userAgent,subString:".NET4",identity:"IE",versionSearch:"rv"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],dataOS:[{string:navigator.userAgent,subString:"Windows Phone",identity:"Windows Phone"},{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.userAgent,subString:"Android",identity:"Android"},{string:navigator.platform,subString:"Linux",identity:"Linux"}]};Array.prototype.find||(Array.prototype.find=function(e){if(null==this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var s,r=Object(this),t=r.length>>>0,i=arguments[1],n=0;n<t;n++)if(e.call(i,s=r[n],n,r))return s}),"remove"in Element.prototype||(Element.prototype.remove=function(){this.parentNode&&this.parentNode.removeChild(this)});var CaBrowserCompatibility={init:function(){"IE"===BrowserDetect.browser&&parseFloat(BrowserDetect.version)<10?window.location="/compatibility-check/unsupported-browser.html":this.getBrowserCompatibilityJSON()},storageKey:"caBrowserJson",getBrowserCompatibilityJSON:function(){var e=this;if(window.sessionStorage&&window.sessionStorage.getItem(this.storageKey)){var r=sessionStorage.getItem(this.storageKey);r="string"==typeof r?JSON.parse(r):r,e.browserCheckJsonCallback(null,r)}var t=new XMLHttpRequest;t.open("GET",caBrowserSupportAPIUrl.indexOf("INCOMPATIBLE_BROWSER_URL")>0?defaultURL:caBrowserSupportAPIUrl,!0),t.setRequestHeader("Content-Type","application/json"),t.setRequestHeader("x-api-key",caBrowserSupporAPIKey.indexOf("INCOMPATIBLE_BROWSER_API_KEY")>0?defaultAPIKey:caBrowserSupporAPIKey),t.responseType="json",t.onload=function(){var i=t.status;200===i?(e.setBrowserCompatibilityJSON(t.response),e.browserCheckJsonCallback(null,t.response)):e.browserCheckJsonCallback(i,t.response)},t.send()},setBrowserCompatibilityJSON:function(e){window.sessionStorage&&window.sessionStorage.setItem(this.storageKey,"string"==typeof e?e:JSON.stringify(e))},queryCompatibilityJSON:function(e){for(var r=0;r<e.length;r++)if(e[r].Browsers.find(this.checkBrowser)){"Restrict"===e[r].SupportLevel&&(window.location="/compatibility-check/unsupported-browser.html");break}},browserCheckJsonCallback:function(e,r){null!==e||(r="string"==typeof r?JSON.parse(r):r,this.queryCompatibilityJSON(r))},checkBrowser:function(e){switch(e.Type){case"Android":var r=navigator.userAgent.toLowerCase();if(new RegExp(e.Type.toLowerCase()).test(r)){var t=r.match(/android\s([0-9\.]*)/);if(parseFloat(t[1])<=parseFloat(e.MinVersion))return!0}return!1;case"IOS":if(/iP(hone|od|ad)/.test(navigator.platform)){var i=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);if((t=[parseInt(i[1],10),parseInt(i[2],10),parseInt(i[3]||0,10)])[0]<=parseInt(e.MinVersion,10))return!0}return!1;default:return e.Type==BrowserDetect.browser&&parseFloat(BrowserDetect.version)<=parseFloat(e.MinVersion)}}};BrowserDetect.init(),CaBrowserCompatibility.init();